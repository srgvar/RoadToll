<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet id="db.creationusers" author="srgva">
        <sql>

         DROP TABLE IF EXISTS user_roles;
         DROP TABLE IF EXISTS users;

            CREATE TABLE users
            (
            user_id INTEGER AUTO_INCREMENT NOT NULL,
            username VARCHAR(20) NOT NULL,
            fullname VARCHAR(60),
            password VARCHAR(60) NOT NULL,
            enabled BOOLEAN DEFAULT TRUE
            );
            CREATE UNIQUE INDEX users_id_uindex ON users (user_id);

            CREATE TABLE user_roles
            (
            role_id INTEGER AUTO_INCREMENT NOT NULL,
            user_id INTEGER,
            role VARCHAR(40)
            );
            CREATE UNIQUE INDEX user_roles_role_id_uindex ON user_roles (role_id);
            CREATE INDEX user_roles_user_id ON user_roles(user_id);

         INSERT INTO users (username, fullname, password, enabled)
                VALUES ('client', 'client - autogenerated', '$2a$10$emslnwQGNb35ggiEh2W.N.eCMhaLofyJB7TMbCd5c7651xSbl18fy', true);
         INSERT INTO users (username, fullname, password, enabled)
                VALUES ('manager','manager - auto generated', '$2a$10$PEAWbg8yaRsBWTC9vz67COr2XelmdWi6OsAko1iQqK3QEMInwNYQG', true);
         INSERT INTO users (username, fullname, password, enabled)
                VALUES ('root', 'root - auto generated', '$2a$10$fTU6cgjw3IRUh67bcilbW.Hvc.jfKLBHFs0GmF13SSyIPxojzRuGC', true);

         INSERT INTO user_roles (user_id, role)
                VALUES (001,'CLIENT');
         INSERT INTO user_roles (user_id, role)
                VALUES (002,'CLIENT');
         INSERT INTO user_roles (user_id, role)
                VALUES (002,'MANAGER');
         INSERT INTO user_roles (user_id, role)
                VALUES (003,'CLIENT');
         INSERT INTO user_roles (user_id, role)
                VALUES (003,'MANAGER');
         INSERT INTO user_roles (user_id, role)
                VALUES (003,'ROOT');

         ALTER TABLE USER_ROLES
         ADD CONSTRAINT USER_ROLES_USERS_USER_ID_fk
         FOREIGN KEY (USER_ID) REFERENCES USERS (USER_ID);

        </sql>

    </changeSet>
</databaseChangeLog>